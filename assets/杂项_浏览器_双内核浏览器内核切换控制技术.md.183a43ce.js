import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.a9d1f0e8.js";const h=JSON.parse('{"title":"双内核浏览器内核切换控制技术","description":"","frontmatter":{},"headers":[],"relativePath":"杂项/浏览器/双内核浏览器内核切换控制技术.md","filePath":"杂项/浏览器/双内核浏览器内核切换控制技术.md","lastUpdated":1695268643000}'),o={name:"杂项/浏览器/双内核浏览器内核切换控制技术.md"},e=l(`<h1 id="双内核浏览器内核切换控制技术" tabindex="-1">双内核浏览器内核切换控制技术 <a class="header-anchor" href="#双内核浏览器内核切换控制技术" aria-label="Permalink to &quot;双内核浏览器内核切换控制技术&quot;">​</a></h1><h2 id="什么是双核浏览器" tabindex="-1">什么是双核浏览器 <a class="header-anchor" href="#什么是双核浏览器" aria-label="Permalink to &quot;什么是双核浏览器&quot;">​</a></h2><p>双核浏览器支持使用两个或者以上的浏览器引擎来渲染网页，目前绝大多数国产浏览器均为双核甚至多核。</p><h2 id="双核到底是什么内核" tabindex="-1">双核到底是什么内核 <a class="header-anchor" href="#双核到底是什么内核" aria-label="Permalink to &quot;双核到底是什么内核&quot;">​</a></h2><ul><li><p>基于Chromium的Blink/Webkit内核。一般在国产浏览器中被称为“极速内核/极速模式”。该内核随着该浏览器的更新而更新。</p></li><li><p>IE内核。一般在国产浏览器中被称为“IE内核/兼容模式”，是指调用Windows系统中内置的IE，并非该浏览器单独内置了一套IE，该内核随着Windows或者IE的更新而更新。</p><blockquote><p>唯一的例外情况是2012年360安全浏览器曾经推出内置IE的版本</p></blockquote></li></ul><h2 id="ie内核的兼容模式" tabindex="-1">IE内核的兼容模式 <a class="header-anchor" href="#ie内核的兼容模式" aria-label="Permalink to &quot;IE内核的兼容模式&quot;">​</a></h2><p>某些国产浏览器在“IE内核”下，可以切换其“兼容模式”，这并不是切换不同的IE内核版本，而是通过调用系统中IE内核的不同“文档模式”来实现的，<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fgucong3000%2Fbrowser_renderer%2Fblob%2Fmaster%2Fie_document_mode.md" target="_blank" rel="noreferrer">详细的信息请参阅这里</a>。这可能造成一些问题。比如A用户系统中安装了IE8，使用QQ浏览器的“兼容模式 - 7”；B用户系统中安装了IE11，也使用QQ浏览器的“兼容模式 - 7”，虽然都用的同一个浏览器且选择了同一个兼容模式，但是对于html5表单项等诸多DOM细节，有着很大的差异。</p><h2 id="如何配置网站要使用的渲染引擎" tabindex="-1">如何配置网站要使用的渲染引擎 <a class="header-anchor" href="#如何配置网站要使用的渲染引擎" aria-label="Permalink to &quot;如何配置网站要使用的渲染引擎&quot;">​</a></h2><p>在html的<code>&lt;head&gt;</code>标签中加入如下代码：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;!</span><span style="color:#85E89D;">DOCTYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;renderer&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;webkit&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http-equiv</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;IE=edge,chrome=1&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ... 以下代码省略</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;!</span><span style="color:#22863A;">DOCTYPE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">html</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">head</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;renderer&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;webkit&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http-equiv</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;X-UA-Compatible&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;IE=edge,chrome=1&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  ... 以下代码省略</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这里我们一共添加了三条有关浏览器渲染方面的指令：</p><ul><li><code>&lt;meta name=&quot;renderer&quot; content=&quot;webkit&quot;&gt;</code>中的<code>webkit</code>指令，可以让QQ、傲游、360等浏览器默认使用Chromium内核渲染页面。</li><li><code>X-UA-Compatible</code> 中的<code>IE=edge</code>指令，可以让IE或者调用IE内核的浏览器，使用标准模式渲染网页，注意这里和“Edge浏览器”无关，只是恰巧重名罢了。</li><li><code>X-UA-Compatible</code> 中的<code>chrome=1</code>指令，可以让安装了<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fgucong3000%2Fbrowser_renderer%2Fblob%2Fmaster%2Fgcf.md" target="_blank" rel="noreferrer">GCF插件</a>的IE，在打开网页时使用Chromium内核渲染页面。</li></ul><h2 id="需要注意几个重要的神坑" tabindex="-1">需要注意几个重要的神坑： <a class="header-anchor" href="#需要注意几个重要的神坑" aria-label="Permalink to &quot;需要注意几个重要的神坑：&quot;">​</a></h2><ul><li><code>&lt;meta&gt;</code>标签必须出现在<code>&lt;head&gt;</code>内的顶部，否则浏览器可能无法识别。</li><li><code>&lt;!DOCTYPE html&gt;</code>文档类型声明必须写，否则各种浏览器内核均会以“IE5模式(又称作怪癖模式、quirks模式)”渲染网页。</li><li>测试效果时，网站必须以域名访问，内网或者本地地址方式可能对部分浏览器无效。</li><li>如果用户曾经自主选择过渲染引擎，浏览器将记住这个选择，它的优先级高于我们的指令。如果测试时不小心点了，在必要的情况下需要卸载浏览器并清空用户数据，然后重装。</li><li>应该尽量保证整站的渲染内核一致，以便避免内核切换可能带来的cookie丢失问题。</li></ul><h2 id="通过js判断当前浏览器内核及文档模式" tabindex="-1">通过js判断当前浏览器内核及文档模式 <a class="header-anchor" href="#通过js判断当前浏览器内核及文档模式" aria-label="Permalink to &quot;通过js判断当前浏览器内核及文档模式&quot;">​</a></h2><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;//gucong3000.github.io/browser.js/browser.min.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (browser.</span><span style="color:#79B8FF;">MSIE</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;系统IE版本：&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> browser.rv </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">文档模式：&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> browser.</span><span style="color:#79B8FF;">MSIE</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (browser.Edge) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Edge内核浏览器&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (browser.Webkit) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Blink/Webkit内核的浏览器&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (browser.Gecko) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Gecko内核的浏览器&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;//gucong3000.github.io/browser.js/browser.min.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (browser.</span><span style="color:#005CC5;">MSIE</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;系统IE版本：&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> browser.rv </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">文档模式：&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> browser.</span><span style="color:#005CC5;">MSIE</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (browser.Edge) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Edge内核浏览器&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (browser.Webkit) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Blink/Webkit内核的浏览器&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (browser.Gecko) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Gecko内核的浏览器&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="参考文档链接" tabindex="-1">参考文档链接 <a class="header-anchor" href="#参考文档链接" aria-label="Permalink to &quot;参考文档链接&quot;">​</a></h2><h3 id="开发者可控制内核切换" tabindex="-1">开发者可控制内核切换 <a class="header-anchor" href="#开发者可控制内核切换" aria-label="Permalink to &quot;开发者可控制内核切换&quot;">​</a></h3><ul><li><a href="http://browser.qq.com/faq/#/detail/36" target="_blank" rel="noreferrer">QQ浏览器内核切换控制</a></li><li><a href="http://bbs.maxthon.cn/thread-13159-1-1.html" target="_blank" rel="noreferrer">傲游浏览器内核切换控制</a></li><li><a href="http://se.360.cn/v6/help/meta.html" target="_blank" rel="noreferrer">360安全浏览器内核切换控制</a></li><li><a href="https://blogs.msdn.microsoft.com/ie/2010/06/16/ies-compatibility-features-for-site-developers/" target="_blank" rel="noreferrer">IE网站开发人员的兼容性功能</a></li></ul><h3 id="只支持用户自主切换内核" tabindex="-1">只支持用户自主切换内核 <a class="header-anchor" href="#只支持用户自主切换内核" aria-label="Permalink to &quot;只支持用户自主切换内核&quot;">​</a></h3><ul><li><a href="http://ie.sogou.com/help2/help-4-7.html" target="_blank" rel="noreferrer">搜狗浏览器内核手动切换</a></li></ul><h3 id="资料暂缺或不明确" tabindex="-1">资料暂缺或不明确 <a class="header-anchor" href="#资料暂缺或不明确" aria-label="Permalink to &quot;资料暂缺或不明确&quot;">​</a></h3><ul><li>猎豹安全浏览器：<a href="https://blog.csdn.net/a0405221/article/details/78903104" target="_blank" rel="noreferrer">非官方资料</a>说可以</li><li>360急速浏览器：无官方资料，但根据<a href="https://blog.csdn.net/a0405221/article/details/78903104" target="_blank" rel="noreferrer">非官方资料</a>，支持内核切换控制</li><li>百度浏览器：无相关资料</li></ul>`,23),p=[e];function t(r,c,E,i,y,u){return a(),n("div",null,p)}const b=s(o,[["render",t]]);export{h as __pageData,b as default};
